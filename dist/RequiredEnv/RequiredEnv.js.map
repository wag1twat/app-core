{"version":3,"sources":["RequiredEnv/RequiredEnv.js","../lib/RequiredEnv/RequiredEnv.ts"],"names":["Object","defineProperty","exports","value","runtypes_1","require","defaultOptions","checkOnInitializeClass","RequiredEnv","_variables","_contract","constructor","variables","options","this","createContract","check","Record","reduce","a","c","String","getVariables","v","process","env"],"mappings":"AAAA,aACAA,OAAOC,eAAeC,QAAS,aAAc,CAAEC,MAAO,CAAA,CAAK,CAAC,EAA5DH,QAAOC,YAAeC,KAAAA,ECDtB,MAAAE,WAAAC,QAAA,UAAA,EAGMC,eAAqC,CACvCC,uBAAwB,CAAA,CAJ5B,QAOMC,YACMC,WACAC,UAERC,YAAYC,EAAcC,EAA8BP,gBACpDQ,KAAKL,WAAaG,EAElBE,KAAKJ,UAAYI,KAAKC,eAAc,EAE5BR,EAA2BM,EAAL,uBAE3BN,GACCO,KAAKE,MAAK,CAElB,CAEQD,iBACJ,OAAO,EAAAX,WAAAa,QAAeH,KAAKL,WAAWS,OAAmC,CAACC,EAAGC,KAAC,CAAQ,GAAGD,GAAIC,GAAIhB,WAAAiB,MAAgB,GAAG,EAAgC,CAAC,CACzJ,CAEOL,QACHF,KAAKJ,UAAUM,MAAMF,KAAKQ,aAAY,CAAE,CAC5C,CAEOA,eACH,OAAOR,KAAKL,WAAWS,OAA2B,CAACC,EAAGI,KAAC,CAAQ,GAAGJ,GAAII,GAAIC,QAAQC,IAAIF,EAAI,GAAG,EAAwB,CACzH,CDNJ,CCSSrB,QAAAM,YAAAA","file":"RequiredEnv.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RequiredEnv = void 0;\nconst runtypes_1 = require(\"runtypes\");\nconst defaultOptions = {\n    checkOnInitializeClass: true\n};\nclass RequiredEnv {\n    _variables;\n    _contract;\n    constructor(variables, options = defaultOptions) {\n        this._variables = variables;\n        this._contract = this.createContract();\n        const { checkOnInitializeClass } = options;\n        if (checkOnInitializeClass) {\n            this.check();\n        }\n    }\n    createContract() {\n        return (0, runtypes_1.Record)(this._variables.reduce((a, c) => ({ ...a, [c]: runtypes_1.String }), {}));\n    }\n    check() {\n        this._contract.check(this.getVariables());\n    }\n    getVariables() {\n        return this._variables.reduce((a, v) => ({ ...a, [v]: process.env[v] }), {});\n    }\n}\nexports.RequiredEnv = RequiredEnv;\n","import { Record as RuntypesRecord, String as RuntypesString } from \"runtypes\"\r\nimport { MappedVariables, MappedVariablesContract, MappedVariablesRuntypes, RequiredEnvOptions } from \"./types\"\r\n\r\nconst defaultOptions: RequiredEnvOptions = {\r\n    checkOnInitializeClass: true\r\n}\r\n\r\nclass RequiredEnv<V extends readonly string[]> {\r\n    private _variables: V\r\n    private _contract: MappedVariablesContract<V>\r\n\r\n    constructor(variables: V, options: RequiredEnvOptions = defaultOptions) {\r\n        this._variables = variables\r\n\r\n        this._contract = this.createContract()\r\n\r\n        const { checkOnInitializeClass } = options\r\n\r\n        if(checkOnInitializeClass) {\r\n            this.check()\r\n        }\r\n    }\r\n\r\n    private createContract(){\r\n        return RuntypesRecord(this._variables.reduce<MappedVariablesRuntypes<V>>((a, c) => ({ ...a, [c]: RuntypesString }), {} as MappedVariablesRuntypes<V>))\r\n    }\r\n\r\n    public check(){\r\n        this._contract.check(this.getVariables())\r\n    }\r\n\r\n    public getVariables(): MappedVariables<V> {\r\n        return this._variables.reduce<MappedVariables<V>>((a, v) => ({ ...a, [v]: process.env[v] }), {} as MappedVariables<V>)\r\n    }\r\n}\r\n\r\nexport { RequiredEnv }"]}