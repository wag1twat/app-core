"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UrlSerializer=void 0;const Base_1=require("../Base"),utils_1=require("./utils");class UrlSerializer{_path;_params;_options;constructor(t,i=utils_1.defaultSerializeOptions,s={}){this._path=t,this._params=s,this._options=i,this.extend=this.extend.bind(this),this.setupParam=this.setupParam.bind(this),this.path=this.path.bind(this),this.param=this.param.bind(this),this.build=this.build.bind(this),this.link=this.link.bind(this),this.queries=this.queries.bind(this)}setupParam(t){if(Base_1.Base.Object(this._params).get(t))throw new utils_1.UniqueParamException(t);this._params={...this._params,[":"+t]:t}}extend(t=void 0,i){return void 0===t&&"build"===i?new UrlSerializer(this._path,this._options,this._params):t&&"queries"===i||t&&"link"===i?new UrlSerializer(t,this._options,this._params):void 0}path(t){return this._path=this._path+"/"+t,this}param(t){return this.setupParam(t),this._path=this._path+"/:"+t,this}link(t){const i=Base_1.Base.String(this._path).replaceAllSeparatedString("/",t);return{path:i,extend:()=>this.extend(i,"link")}}queries(t,i){const s=Base_1.Base.String(this._path).joinQueryString(Base_1.Base.Object(t).toQueries({...this._options,...i}));return{path:s,extend:()=>this.extend(s,"queries")}}build(){return{path:this._path,extend:()=>this.extend(void 0,"build"),link:this.link,queries:this.queries}}}exports.UrlSerializer=UrlSerializer;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlVybFNlcmlhbGl6ZXIvVXJsU2VyaWFsaXplci5qcyIsIi4uL3NyYy9VcmxTZXJpYWxpemVyL1VybFNlcmlhbGl6ZXIudHMiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJCYXNlXzEiLCJyZXF1aXJlIiwidXRpbHNfMSIsIlVybFNlcmlhbGl6ZXIiLCJfcGF0aCIsIl9wYXJhbXMiLCJfb3B0aW9ucyIsImNvbnN0cnVjdG9yIiwicGF0aCIsIm9wdGlvbnMiLCJkZWZhdWx0U2VyaWFsaXplT3B0aW9ucyIsInBhcmFtcyIsInRoaXMiLCJleHRlbmQiLCJiaW5kIiwic2V0dXBQYXJhbSIsInBhcmFtIiwiYnVpbGQiLCJsaW5rIiwicXVlcmllcyIsImtleSIsIkJhc2UiLCJnZXQiLCJVbmlxdWVQYXJhbUV4Y2VwdGlvbiIsInVuZGVmaW5lZCIsInR5cGUiLCJTdHJpbmciLCJyZXBsYWNlQWxsU2VwYXJhdGVkU3RyaW5nIiwicXVlcmllc09iamVjdCIsImpvaW5RdWVyeVN0cmluZyIsInRvUXVlcmllcyJdLCJtYXBwaW5ncyI6IkFBQUEsYUFDQUEsT0FBT0MsZUFBZUMsUUFBUyxhQUFjLENBQUVDLE1BQU8sQ0FBQSxDQUFLLENBQUMsRUFBNURILFFBQU9DLGNBQWVDLEtBQUFBLEVDRHRCLE1BQUFFLE9BQUFDLFFBQUEsU0FBQSxFQUNBQyxRQUFBRCxRQUFBLFNBQUEsUUFFTUUsY0FDTUMsTUFDQUMsUUFDQUMsU0FDUkMsWUFBWUMsRUFBWUMsRUFBeUNQLFFBQUFRLHdCQUF5QkMsRUFBaUIsSUFDdkdDLEtBQUtSLE1BQVFJLEVBQ2JJLEtBQUtQLFFBQVVNLEVBQ2ZDLEtBQUtOLFNBQVdHLEVBQ2hCRyxLQUFLQyxPQUFTRCxLQUFLQyxPQUFPQyxLQUFLRixJQUFJLEVBQ25DQSxLQUFLRyxXQUFhSCxLQUFLRyxXQUFXRCxLQUFLRixJQUFJLEVBQzNDQSxLQUFLSixLQUFPSSxLQUFLSixLQUFLTSxLQUFLRixJQUFJLEVBQy9CQSxLQUFLSSxNQUFRSixLQUFLSSxNQUFNRixLQUFLRixJQUFJLEVBQ2pDQSxLQUFLSyxNQUFRTCxLQUFLSyxNQUFNSCxLQUFLRixJQUFJLEVBQ2pDQSxLQUFLTSxLQUFPTixLQUFLTSxLQUFLSixLQUFLRixJQUFJLEVBQy9CQSxLQUFLTyxRQUFVUCxLQUFLTyxRQUFRTCxLQUFLRixJQUFJLENBQ3pDLENBRVFHLFdBQStCSyxHQUNuQyxHQUFHcEIsT0FBQXFCLEtBQUt6QixPQUFPZ0IsS0FBS1AsT0FBTyxFQUFFaUIsSUFBSUYsQ0FBRyxFQUNoQyxNQUFNLElBQUlsQixRQUFBcUIscUJBQXFCSCxDQUFHLEVBRXRDUixLQUFLUCxRQUFVLENBQUUsR0FBR08sS0FBS1AsU0FBVSxJQUFJZSxHQUFRQSxDQUFHLENBQ3RELENBS1FQLE9BQXlCTCxFQUEyRWdCLEtBQUFBLEVBQVdDLEdBQ25ILE9BQVlELEtBQUFBLElBQVRoQixHQUErQixVQUFUaUIsRUFDZCxJQUFJdEIsY0FBNEJTLEtBQUtSLE1BQU9RLEtBQUtOLFNBQVVNLEtBQUtQLE9BQU8sRUFFL0VHLEdBQWlCLFlBQVRpQixHQUdSakIsR0FBaUIsU0FBVGlCLEVBQ0EsSUFBSXRCLGNBQXVFSyxFQUEwQ0ksS0FBS04sU0FBVU0sS0FBS1AsT0FBTyxFQUQzSixLQUFBLENBR0osQ0FFT0csS0FBdUJULEdBRTFCLE9BREFhLEtBQUtSLE1BQVdRLEtBQUtSLE1BQVIsSUFBaUJMLEVBQ3ZCYSxJQUNYLENBRU9JLE1BQTBCSSxHQUc3QixPQUZBUixLQUFLRyxXQUFXSyxDQUFHLEVBQ25CUixLQUFLUixNQUFXUSxLQUFLUixNQUFSLEtBQWtCZ0IsRUFDeEJSLElBQ1gsQ0FFUU0sS0FBdUJQLEdBQzNCLE1BQU1ILEVBQU9SLE9BQUFxQixLQUFLSyxPQUFPZCxLQUFLUixLQUFLLEVBQUV1QiwwQkFBMEIsSUFBS2hCLENBQU0sRUFDMUUsTUFBTyxDQUNISCxLQUFBQSxFQUNBSyxPQUFRQSxJQUFNRCxLQUFLQyxPQUFPTCxFQUFNLE1BQU0sQ0FOOUMsQ0FRQSxDQUVRVyxRQUE4Q1MsRUFBd0JuQixHQUMxRSxNQUFNRCxFQUFPUixPQUFBcUIsS0FBS0ssT0FBT2QsS0FBS1IsS0FBSyxFQUFFeUIsZ0JBQWdCN0IsT0FBQXFCLEtBQUt6QixPQUFPZ0MsQ0FBYSxFQUFFRSxVQUFVLENBQUUsR0FBR2xCLEtBQUtOLFNBQVUsR0FBR0csQ0FBTyxDQUFFLENBQUMsRUFDM0gsTUFBTyxDQUNIRCxLQUFBQSxFQUNBSyxPQUFRQSxJQUFNRCxLQUFLQyxPQUFPTCxFQUFNLFNBQVMsQ0FOakQsQ0FRQSxDQUVPUyxRQUNILE1BQU8sQ0FDSFQsS0FBTUksS0FBS1IsTUFDWFMsT0FBUUEsSUFBTUQsS0FBS0MsT0FBT1csS0FBQUEsRUFBVyxPQUFPLEVBQzVDTixLQUFNTixLQUFLTSxLQUNYQyxRQUFTUCxLQUFLTyxPQVRkTixDQVdSLENEUEosQ0NVU2YsUUFBQUssY0FBQUEiLCJmaWxlIjoiVXJsU2VyaWFsaXplci9VcmxTZXJpYWxpemVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlVybFNlcmlhbGl6ZXIgPSB2b2lkIDA7XG5jb25zdCBCYXNlXzEgPSByZXF1aXJlKFwiLi4vQmFzZVwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi91dGlsc1wiKTtcbmNsYXNzIFVybFNlcmlhbGl6ZXIge1xuICAgIF9wYXRoO1xuICAgIF9wYXJhbXM7XG4gICAgX29wdGlvbnM7XG4gICAgY29uc3RydWN0b3IocGF0aCwgb3B0aW9ucyA9IHV0aWxzXzEuZGVmYXVsdFNlcmlhbGl6ZU9wdGlvbnMsIHBhcmFtcyA9IHt9KSB7XG4gICAgICAgIHRoaXMuX3BhdGggPSBwYXRoO1xuICAgICAgICB0aGlzLl9wYXJhbXMgPSBwYXJhbXM7XG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmV4dGVuZCA9IHRoaXMuZXh0ZW5kLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc2V0dXBQYXJhbSA9IHRoaXMuc2V0dXBQYXJhbS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnBhdGggPSB0aGlzLnBhdGguYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5wYXJhbSA9IHRoaXMucGFyYW0uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5idWlsZCA9IHRoaXMuYnVpbGQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5saW5rID0gdGhpcy5saW5rLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucXVlcmllcyA9IHRoaXMucXVlcmllcy5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICBzZXR1cFBhcmFtKGtleSkge1xuICAgICAgICBpZiAoQmFzZV8xLkJhc2UuT2JqZWN0KHRoaXMuX3BhcmFtcykuZ2V0KGtleSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyB1dGlsc18xLlVuaXF1ZVBhcmFtRXhjZXB0aW9uKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcGFyYW1zID0geyAuLi50aGlzLl9wYXJhbXMsIFtgOiR7a2V5fWBdOiBrZXkgfTtcbiAgICB9XG4gICAgZXh0ZW5kKHBhdGggPSB1bmRlZmluZWQsIHR5cGUpIHtcbiAgICAgICAgaWYgKHBhdGggPT09IHVuZGVmaW5lZCAmJiB0eXBlID09PSAnYnVpbGQnKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVybFNlcmlhbGl6ZXIodGhpcy5fcGF0aCwgdGhpcy5fb3B0aW9ucywgdGhpcy5fcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGF0aCAmJiB0eXBlID09PSAncXVlcmllcycpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVXJsU2VyaWFsaXplcihwYXRoLCB0aGlzLl9vcHRpb25zLCB0aGlzLl9wYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXRoICYmIHR5cGUgPT09ICdsaW5rJykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVcmxTZXJpYWxpemVyKHBhdGgsIHRoaXMuX29wdGlvbnMsIHRoaXMuX3BhcmFtcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcGF0aCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9wYXRoID0gYCR7dGhpcy5fcGF0aH0vJHt2YWx1ZX1gO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcGFyYW0oa2V5KSB7XG4gICAgICAgIHRoaXMuc2V0dXBQYXJhbShrZXkpO1xuICAgICAgICB0aGlzLl9wYXRoID0gYCR7dGhpcy5fcGF0aH0vOiR7a2V5fWA7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBsaW5rKHBhcmFtcykge1xuICAgICAgICBjb25zdCBwYXRoID0gQmFzZV8xLkJhc2UuU3RyaW5nKHRoaXMuX3BhdGgpLnJlcGxhY2VBbGxTZXBhcmF0ZWRTdHJpbmcoJy8nLCBwYXJhbXMpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgIGV4dGVuZDogKCkgPT4gdGhpcy5leHRlbmQocGF0aCwgJ2xpbmsnKVxuICAgICAgICB9O1xuICAgIH1cbiAgICBxdWVyaWVzKHF1ZXJpZXNPYmplY3QsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IEJhc2VfMS5CYXNlLlN0cmluZyh0aGlzLl9wYXRoKS5qb2luUXVlcnlTdHJpbmcoQmFzZV8xLkJhc2UuT2JqZWN0KHF1ZXJpZXNPYmplY3QpLnRvUXVlcmllcyh7IC4uLnRoaXMuX29wdGlvbnMsIC4uLm9wdGlvbnMgfSkpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgIGV4dGVuZDogKCkgPT4gdGhpcy5leHRlbmQocGF0aCwgJ3F1ZXJpZXMnKVxuICAgICAgICB9O1xuICAgIH1cbiAgICBidWlsZCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBhdGg6IHRoaXMuX3BhdGgsXG4gICAgICAgICAgICBleHRlbmQ6ICgpID0+IHRoaXMuZXh0ZW5kKHVuZGVmaW5lZCwgJ2J1aWxkJyksXG4gICAgICAgICAgICBsaW5rOiB0aGlzLmxpbmssXG4gICAgICAgICAgICBxdWVyaWVzOiB0aGlzLnF1ZXJpZXNcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnRzLlVybFNlcmlhbGl6ZXIgPSBVcmxTZXJpYWxpemVyO1xuIiwiaW1wb3J0IHsgQmFzZSwgVHlwZXMgfSBmcm9tIFwiLi4vQmFzZVwiXHJcbmltcG9ydCB7IGRlZmF1bHRTZXJpYWxpemVPcHRpb25zLCBVcmxTZXJpYWxpemVyT3B0aW9ucywgVXJsU2VyaWFsaXplclBhcmFtcywgVXJsU2VyaWFsaXplclF1ZXJpZXMsIFVuaXF1ZVBhcmFtRXhjZXB0aW9uIH0gZnJvbSAnLi91dGlscydcclxuXHJcbmNsYXNzIFVybFNlcmlhbGl6ZXI8UGF0aCBleHRlbmRzIHN0cmluZywgUGFyYW1zIGV4dGVuZHMgVXJsU2VyaWFsaXplclBhcmFtczxzdHJpbmc+PiB7XHJcbiAgICBwcml2YXRlIF9wYXRoOiBQYXRoXHJcbiAgICBwcml2YXRlIF9wYXJhbXM6IFBhcmFtc1xyXG4gICAgcHJpdmF0ZSBfb3B0aW9uczogUGFydGlhbDxVcmxTZXJpYWxpemVyT3B0aW9ucz5cclxuICAgIGNvbnN0cnVjdG9yKHBhdGg6IFBhdGgsIG9wdGlvbnM6IFBhcnRpYWw8VXJsU2VyaWFsaXplck9wdGlvbnM+ID0gZGVmYXVsdFNlcmlhbGl6ZU9wdGlvbnMsIHBhcmFtczogUGFyYW1zID0ge30gYXMgUGFyYW1zKSB7XHJcbiAgICAgICAgdGhpcy5fcGF0aCA9IHBhdGhcclxuICAgICAgICB0aGlzLl9wYXJhbXMgPSBwYXJhbXNcclxuICAgICAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9uc1xyXG4gICAgICAgIHRoaXMuZXh0ZW5kID0gdGhpcy5leHRlbmQuYmluZCh0aGlzKVxyXG4gICAgICAgIHRoaXMuc2V0dXBQYXJhbSA9IHRoaXMuc2V0dXBQYXJhbS5iaW5kKHRoaXMpXHJcbiAgICAgICAgdGhpcy5wYXRoID0gdGhpcy5wYXRoLmJpbmQodGhpcylcclxuICAgICAgICB0aGlzLnBhcmFtID0gdGhpcy5wYXJhbS5iaW5kKHRoaXMpXHJcbiAgICAgICAgdGhpcy5idWlsZCA9IHRoaXMuYnVpbGQuYmluZCh0aGlzKVxyXG4gICAgICAgIHRoaXMubGluayA9IHRoaXMubGluay5iaW5kKHRoaXMpXHJcbiAgICAgICAgdGhpcy5xdWVyaWVzID0gdGhpcy5xdWVyaWVzLmJpbmQodGhpcylcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldHVwUGFyYW08S2V5IGV4dGVuZHMgc3RyaW5nPihrZXk6IEtleSkge1xyXG4gICAgICAgIGlmKEJhc2UuT2JqZWN0KHRoaXMuX3BhcmFtcykuZ2V0KGtleSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFVuaXF1ZVBhcmFtRXhjZXB0aW9uKGtleSlcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fcGFyYW1zID0geyAuLi50aGlzLl9wYXJhbXMsIFtgOiR7a2V5fWBdOiBrZXkgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZXh0ZW5kKHBhdGg6IHVuZGVmaW5lZCwgdHlwZTogJ2J1aWxkJyk6IFVybFNlcmlhbGl6ZXI8UGF0aCwgUGFyYW1zPlxyXG4gICAgcHJpdmF0ZSBleHRlbmQ8UCBleHRlbmRzIGAke3N0cmluZ30ke3N0cmluZ31gPihwYXRoOiBQLCB0eXBlOiAncXVlcmllcycpOiBVcmxTZXJpYWxpemVyPFAsIFBhcmFtcz5cclxuICAgIHByaXZhdGUgZXh0ZW5kPFAgZXh0ZW5kcyBQYXJhbXM+KHBhdGg6IFR5cGVzLlN0cmluZy5SZXBsYWNlQWxsPFBhdGgsIFA+LCB0eXBlOiAnbGluaycpOiBVcmxTZXJpYWxpemVyPFR5cGVzLlN0cmluZy5SZXBsYWNlQWxsPFBhdGgsIFA+LCBPbWl0PFBhcmFtcywga2V5b2YgUD4+XHJcbiAgICBwcml2YXRlIGV4dGVuZDxQIGV4dGVuZHMgUGFyYW1zPihwYXRoOiBUeXBlcy5TdHJpbmcuUmVwbGFjZUFsbDxQYXRoLCBQPiB8IGAke1BhdGh9PyR7c3RyaW5nfWAgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQsIHR5cGU6ICdidWlsZCcgfCAncXVlcmllcycgfCAnbGluaycpIHtcclxuICAgICAgICBpZihwYXRoID09PSB1bmRlZmluZWQgJiYgdHlwZSA9PT0gJ2J1aWxkJykge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFVybFNlcmlhbGl6ZXI8UGF0aCwgUGFyYW1zPih0aGlzLl9wYXRoLCB0aGlzLl9vcHRpb25zLCB0aGlzLl9wYXJhbXMpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHBhdGggJiYgdHlwZSA9PT0gJ3F1ZXJpZXMnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVXJsU2VyaWFsaXplcjxgJHtQYXRofT8ke3N0cmluZ31gLCBQYXJhbXM+KHBhdGgsIHRoaXMuX29wdGlvbnMsIHRoaXMuX3BhcmFtcylcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYocGF0aCAmJiB0eXBlID09PSAnbGluaycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBVcmxTZXJpYWxpemVyPFR5cGVzLlN0cmluZy5SZXBsYWNlQWxsPFBhdGgsIFA+LCBPbWl0PFBhcmFtcywga2V5b2YgUD4+KHBhdGggYXMgVHlwZXMuU3RyaW5nLlJlcGxhY2VBbGw8UGF0aCwgUD4sIHRoaXMuX29wdGlvbnMsIHRoaXMuX3BhcmFtcylcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHBhdGg8VCBleHRlbmRzIHN0cmluZz4odmFsdWU6IFQpIHtcclxuICAgICAgICB0aGlzLl9wYXRoID0gYCR7dGhpcy5fcGF0aH0vJHt2YWx1ZX1gIGFzIFBhdGhcclxuICAgICAgICByZXR1cm4gdGhpcyBhcyB1bmtub3duIGFzIFVybFNlcmlhbGl6ZXI8YCR7UGF0aH0vJHtUfWAsIFBhcmFtcz5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcGFyYW08S2V5IGV4dGVuZHMgc3RyaW5nPihrZXk6IEtleSkge1xyXG4gICAgICAgIHRoaXMuc2V0dXBQYXJhbShrZXkpXHJcbiAgICAgICAgdGhpcy5fcGF0aCA9IGAke3RoaXMuX3BhdGh9Lzoke2tleX1gIGFzIFBhdGhcclxuICAgICAgICByZXR1cm4gdGhpcyBhcyB1bmtub3duIGFzIFVybFNlcmlhbGl6ZXI8YCR7UGF0aH0vOiR7S2V5fWAsIFBhcmFtcyAmIFVybFNlcmlhbGl6ZXJQYXJhbXM8S2V5Pj5cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGxpbms8UCBleHRlbmRzIFBhcmFtcz4ocGFyYW1zOiBQKSB7XHJcbiAgICAgICAgY29uc3QgcGF0aCA9IEJhc2UuU3RyaW5nKHRoaXMuX3BhdGgpLnJlcGxhY2VBbGxTZXBhcmF0ZWRTdHJpbmcoJy8nLCBwYXJhbXMpXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcGF0aCxcclxuICAgICAgICAgICAgZXh0ZW5kOiAoKSA9PiB0aGlzLmV4dGVuZChwYXRoLCAnbGluaycpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcXVlcmllczxRdWVyaWVzIGV4dGVuZHMgVXJsU2VyaWFsaXplclF1ZXJpZXM+KHF1ZXJpZXNPYmplY3Q6IFF1ZXJpZXMsIG9wdGlvbnM/OiBQYXJ0aWFsPFVybFNlcmlhbGl6ZXJPcHRpb25zPikge1xyXG4gICAgICAgIGNvbnN0IHBhdGggPSBCYXNlLlN0cmluZyh0aGlzLl9wYXRoKS5qb2luUXVlcnlTdHJpbmcoQmFzZS5PYmplY3QocXVlcmllc09iamVjdCkudG9RdWVyaWVzKHsgLi4udGhpcy5fb3B0aW9ucywgLi4ub3B0aW9ucyB9KSlcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBwYXRoLFxyXG4gICAgICAgICAgICBleHRlbmQ6ICgpID0+IHRoaXMuZXh0ZW5kKHBhdGgsICdxdWVyaWVzJylcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGJ1aWxkKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHBhdGg6IHRoaXMuX3BhdGgsXHJcbiAgICAgICAgICAgIGV4dGVuZDogKCkgPT4gdGhpcy5leHRlbmQodW5kZWZpbmVkLCAnYnVpbGQnKSxcclxuICAgICAgICAgICAgbGluazogdGhpcy5saW5rLFxyXG4gICAgICAgICAgICBxdWVyaWVzOiB0aGlzLnF1ZXJpZXNcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFVybFNlcmlhbGl6ZXIgfSJdfQ==
